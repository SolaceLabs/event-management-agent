ARG BASE_IMAGE
FROM ${BASE_IMAGE}

VOLUME /tmp

ARG MAAS_GITHASH
ARG MAAS_BRANCH
ARG MAAS_BUILD_TIMESTAMP

ENV MAAS_GITHASH="${MAAS_GITHASH}" \
    MAAS_BRANCH="${MAAS_BRANCH}" \
    MAAS_BUILD_TIMESTAMP="${MAAS_BUILD_TIMESTAMP}"

ARG JAR_FILE
ADD ${JAR_FILE} app.jar

ENTRYPOINT [ "sh", "-c", "java $JAVA_OPTS -Djava.security.egd=file:/dev/./urandom -jar /app.jar"]
